name = "rapidtools-validation-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
workers_dev = true

# Route configuration for custom domain
[[routes]]
pattern = "validation-api.rapidtools.dev/*"
zone_name = "rapidtools.dev"

# Default/top-level environment (used when --env is omitted or --env="")
# KV namespace for idempotency (production namespace id + preview id)
[[kv_namespaces]]
binding = "IDEMPOTENCY_KV"
id = "39958d6086da496f975ed607bf6b2127"
preview_id = "bfd3446a6f124812a1c21e85b12021f4"

[vars]
SERVICE_VERSION = "1.0.0"

# Production environment (use: npx wrangler deploy --env production)
[env.production]
workers_dev = true

[[env.production.kv_namespaces]]
binding = "IDEMPOTENCY_KV"
id = "39958d6086da496f975ed607bf6b2127"

[env.production.vars]
SERVICE_VERSION = "1.0.0"

# Secrets (set via Wrangler CLI, not in this file)
# npx wrangler secret put VALIDATION_API_KEYS